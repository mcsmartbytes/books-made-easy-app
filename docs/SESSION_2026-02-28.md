# Session Notes — February 28, 2026

## What Was Done This Session

### 1. Comprehensive Demo Data Seed (All 38 Tables)

Rewrote the `/api/seed-demo` endpoint from a basic 5-table seed into a full 38-table data population system for the "Cascade Consulting Group" demo company.

**3 files created/modified:**

| File | Lines | Purpose |
|------|-------|---------|
| `src/app/api/seed-demo/route.ts` | 345 | Orchestrator — 8-phase seed with FK dependency order, supports seed/clear/fresh actions |
| `src/app/api/seed-demo/seedData.ts` | 612 | All demo data arrays — realistic consulting company data |
| `src/app/api/seed-demo/seedHelpers.ts` | 123 | `clearDemoData()`, date helpers, account/category lookups |

**Demo data created:**

| Category | Records | Details |
|----------|---------|---------|
| Foundation | 1 + 35 + 13 | Company settings, chart of accounts, categories |
| Entities | 7 + 7 + 10 | Customers, vendors, products/services |
| Jobs | 4 + 9 | Jobs with phases (all statuses) |
| Estimates | 4 + 7 | Estimates with line items (draft, sent, accepted, converted) |
| Invoices | 10 + 11 | Invoices with line items (all 5 statuses) |
| Bills | 7 + 9 | Bills with line items (all statuses) |
| Payments | 6 + 3 + 3 | Unified + legacy received + legacy made |
| Banking | 3 + 2 + 3 + 2 + 18 | Bank accounts, deposits, deposit items, reconciliations, transactions |
| Expenses | 12 | Various vendors and categories |
| Journal | 3 + 8 | Entries with balanced debit/credit lines |
| CRM | 3 + 3 | Customer notes and todos |
| Settings | 1 + 1 | Reminder settings + late fee settings (both enabled) |
| Reminders/Fees | 3 + 2 | Invoice reminders + late fees applied |
| Rules | 4 + 3 | Merchant rules + item category rules |
| Recurring | 3 | Monthly/quarterly recurring expenses |
| Subscriptions | 3 + 6 | Detected subscriptions + price history |
| Budgets | 4 | Category budget limits |
| Mileage | 6 | Business trips with locations |
| Reports | 3 | Saved custom reports |

**API interface:**
```bash
POST /api/seed-demo { "user_id": "...", "action": "seed" }          # Seed
POST /api/seed-demo { "user_id": "...", "action": "clear" }         # Clear
POST /api/seed-demo { "user_id": "...", "action": "seed", "fresh": true }  # Clear + seed
```

**Tested and confirmed working** — seeded successfully against production Turso database.

---

### 2. Engineer Summary Document

Created `docs/ENGINEER_GUIDE.md` (452 lines) — a comprehensive guide for the software engineer evaluating a database migration. Covers:

- Architecture diagram (browser → API → ORM → Turso)
- Complete schema summary (38 tables grouped by domain)
- ORM deep dive (`tursoAdmin` query patterns, relations, limitations)
- All 44 API routes with conventions and special logic
- Database migration considerations (what changes, what doesn't, 3 strategy options)
- SQLite-specific patterns to watch for
- File structure map
- Environment setup with `.env.local.example`
- Demo data seeding instructions

---

### 3. Commits & Deployment

| Commit | Description | Files |
|--------|-------------|-------|
| `cde31f0` | Comprehensive seed-demo API + invoice detail page | 4 files, +1,576 lines |
| `385945c` | Engineer guide + env example | 2 files, +452 lines |

Both pushed to `origin/main` — Vercel auto-deploys.

---

## Current State

- **Repo**: Clean working tree, up to date with origin
- **Database**: Seeded with full demo data for user `785f378c-db94-4890-b86e-bbb7aa33d0f2` (Michelle Cruse / MC Smart Bytes)
- **Dev server**: Running at `http://localhost:3000`
- **Deployment**: Vercel at `https://books-your-way.vercel.app`
- **Engineer docs**: Ready at `docs/ENGINEER_GUIDE.md`

---

## Next Steps

### Immediate
- [ ] **Test all features** with the seeded demo data — walk through every dashboard page
- [ ] **Set `CRON_SECRET`** in Vercel project settings (Settings > Environment Variables)
- [ ] **Fix manifest 401** on Vercel preview URLs (check Deployment Protection settings)
- [ ] **Test the cron endpoint** manually: `GET /api/cron/overdue-check` — verify it marks overdue invoices, sends reminders, applies late fees

### Testing Checklist (from last session, still pending)
- [ ] Settings > Invoicing tab — verify reminder + late fee config loads
- [ ] Invoices page — click "Send Reminder" on an overdue invoice
- [ ] Invoices page — click "Apply Late Fee" on an overdue invoice
- [ ] Invoice detail page — verify payment history, reminders, late fees display
- [ ] Customer detail > Statements tab — generate a statement, test print
- [ ] Banking page — verify 3 bank accounts display with balances
- [ ] Banking > Transactions — verify 18 transactions loaded
- [ ] Banking > Reconcile — test completing the in-progress reconciliation
- [ ] Deposits page — verify 2 deposits with linked payments
- [ ] Reports — verify P&L, Balance Sheet, Cash Flow, AR/AP Aging all show data
- [ ] Jobs page — verify 4 jobs with phases and profit margins
- [ ] Estimates page — verify 4 estimates across all statuses
- [ ] Journal Entries — verify 3 entries with balanced lines
- [ ] Expenses page — verify 12 expenses loaded
- [ ] Products & Services — verify 10 items (7 services, 3 products)

### For the Engineer
- [ ] Share repo access (add as collaborator or make repo temporarily public)
- [ ] Point them to `docs/ENGINEER_GUIDE.md` as starting point
- [ ] Discuss target database: Postgres (Supabase/Neon), MySQL (PlanetScale), or other
- [ ] Key decision: keep the custom ORM interface or switch to Prisma/Drizzle?

### Feature Roadmap (after database decision)
- [ ] PDF generation — export invoices and reports
- [ ] Email integration — send invoices and reminders to customers
- [ ] Bank feeds (Plaid) — auto-import transactions
- [ ] Tax preparation — 1040, Schedule C
- [ ] Multi-client support — for bookkeeping company adoption
- [ ] User roles & permissions
- [ ] Recurring invoices
